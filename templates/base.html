<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}VoiceGenie{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              DEFAULT: '#3B82F6',
              dark: '#2563EB'
            },
            secondary: '#10B981'
          },
          keyframes: {
            slideIn: {
              '0%': { opacity: 0, transform: 'translateY(4px)' },
              '100%': { opacity: 1, transform: 'translateY(0)' }
            },
            pulse: {
              '0%, 100%': { opacity: 1 },
              '50%': { opacity: 0.5 }
            }
          },
          animation: {
            slideIn: 'slideIn 0.25s ease',
            pulse: 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite'
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    body {
      font-family: 'Inter', sans-serif;
    }
    .message-container {
      scrollbar-width: thin;
      scrollbar-color: #3B82F6 transparent;
    }
    .message-container::-webkit-scrollbar {
      width: 6px;
    }
    .message-container::-webkit-scrollbar-thumb {
      background-color: #3B82F6;
      border-radius: 3px;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100">
  <header class="bg-white dark:bg-gray-800 shadow-sm">
    <nav class="container mx-auto px-4 py-3 flex items-center justify-between">
      <a href="/" class="flex items-center space-x-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd" />
        </svg>
        <span class="text-xl font-bold text-primary">VoiceGenie</span>
      </a>
      <div class="hidden md:flex items-center space-x-6">
        <a href="/" class="text-gray-600 dark:text-gray-300 hover:text-primary transition">Home</a>
        <a href="/about/" class="text-gray-600 dark:text-gray-300 hover:text-primary transition">About</a>
        {% if user.is_authenticated %}
          <a href="/chat/" class="text-gray-600 dark:text-gray-300 hover:text-primary transition">Chat</a>
          <a href="/tts/dashboard/" class="text-gray-600 dark:text-gray-300 hover:text-primary transition">Dashboard</a>
          <button id="themeToggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition">
            <svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600 dark:text-gray-300 hidden" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" />
            </svg>
            <svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600 dark:text-gray-300" viewBox="0 0 20 20" fill="currentColor">
              <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
            </svg>
          </button>
          <a href="/accounts/logout/" class="px-3 py-2 text-sm bg-primary text-white rounded hover:bg-primary-dark transition">Logout</a>
        {% else %}
          <a href="/accounts/login/" class="px-3 py-2 text-sm text-primary border border-primary rounded hover:bg-primary/10 transition">Login</a>
          <a href="/accounts/register/" class="px-3 py-2 text-sm bg-primary text-white rounded hover:bg-primary-dark transition">Register</a>
        {% endif %}
      </div>
      <button id="mobileMenuButton" class="md:hidden p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </nav>
    <!-- Mobile menu -->
    <div id="mobileMenu" class="md:hidden hidden bg-white dark:bg-gray-800 px-4 py-2 border-t dark:border-gray-700">
      <div class="flex flex-col space-y-3">
        <a href="/" class="text-gray-600 dark:text-gray-300 hover:text-primary transition">Home</a>
        <a href="/about/" class="text-gray-600 dark:text-gray-300 hover:text-primary transition">About</a>
        {% if user.is_authenticated %}
          <a href="/chat/" class="text-gray-600 dark:text-gray-300 hover:text-primary transition">Chat</a>
          <a href="/tts/dashboard/" class="text-gray-600 dark:text-gray-300 hover:text-primary transition">Dashboard</a>
          <div class="flex items-center justify-between pt-2 border-t dark:border-gray-700">
            <span class="text-gray-600 dark:text-gray-300">Theme</span>
            <button id="mobileThemeToggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition">
              <svg id="mobileSunIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600 dark:text-gray-300 hidden" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" />
              </svg>
              <svg id="mobileMoonIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600 dark:text-gray-300" viewBox="0 0 20 20" fill="currentColor">
                <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
              </svg>
            </button>
          </div>
          <a href="/accounts/logout/" class="mt-2 px-3 py-2 text-sm text-center bg-primary text-white rounded hover:bg-primary-dark transition">Logout</a>
        {% else %}
          <a href="/accounts/login/" class="px-3 py-2 text-sm text-center text-primary border border-primary rounded hover:bg-primary/10 transition">Login</a>
          <a href="/accounts/register/" class="px-3 py-2 text-sm text-center bg-primary text-white rounded hover:bg-primary-dark transition">Register</a>
        {% endif %}
      </div>
    </div>
  </header>

  <main class="flex-1 container mx-auto px-4 py-6">{% block content %}{% endblock %}</main>

  <footer class="bg-white dark:bg-gray-800 border-t dark:border-gray-700 py-6">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="flex items-center space-x-2 mb-4 md:mb-0">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd" />
          </svg>
          <span class="text-lg font-semibold text-gray-800 dark:text-gray-200">VoiceGenie</span>
        </div>
        <div class="flex flex-wrap justify-center gap-4 md:gap-6">
          <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary transition">Terms</a>
          <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary transition">Privacy</a>
          <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary transition">Contact</a>
          <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary transition">Twitter</a>
          <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary transition">GitHub</a>
        </div>
      </div>
      <div class="mt-6 text-center text-sm text-gray-500 dark:text-gray-400">
        Â© {{ now|date:'Y' }} VoiceGenie. All rights reserved.
      </div>
    </div>
  </footer>

  {% block scripts %}
  <script>
    // Theme toggle functionality
    function setTheme(isDark) {
      document.documentElement.classList.toggle('dark', isDark);
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      
      // Update icons
      document.getElementById('sunIcon').classList.toggle('hidden', isDark);
      document.getElementById('moonIcon').classList.toggle('hidden', !isDark);
      document.getElementById('mobileSunIcon').classList.toggle('hidden', isDark);
      document.getElementById('mobileMoonIcon').classList.toggle('hidden', !isDark);
    }

    // Initialize theme
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const savedTheme = localStorage.getItem('theme') || (prefersDark ? 'dark' : 'light');
    setTheme(savedTheme === 'dark');

    // Theme toggle buttons
    document.getElementById('themeToggle')?.addEventListener('click', () => {
      const isDark = !document.documentElement.classList.contains('dark');
      setTheme(isDark);
    });

    document.getElementById('mobileThemeToggle')?.addEventListener('click', () => {
      const isDark = !document.documentElement.classList.contains('dark');
      setTheme(isDark);
    });

    // Mobile menu toggle
    document.getElementById('mobileMenuButton')?.addEventListener('click', () => {
      document.getElementById('mobileMenu').classList.toggle('hidden');
    });
  </script>
  {% endblock %}
</body>
</html>